@page "/Orders"

@using SimpleBlazorGrid.EntityFramework.DataSource
@using SimpleBlazorGrid.EntityFramework.Sandbox.Core.Domain
@using SimpleBlazorGrid.EntityFramework.Sandbox.Core.Infrastructure
@using Microsoft.EntityFrameworkCore

<SimpleGrid TType="Order"
            Title="Orders"
            Selectable="true"
            Searchable="true"
            SimpleGridDataSource="@(new SimpleGridEntityFrameworkDataSource<Order>(Context.Orders.Include(x => x.Customer).AsQueryable()))">
    <Columns>
        <SimpleColumn TType="Order" For="@(x => x.OrderId)"/>
        <SimpleColumn TType="Order" For="@(x => x.CustomerId)"/>
        <SimpleColumn TType="Order" For="@(x => x.Customer.CompanyName)" Sortable="@true" Heading="Company" Searchable="true"/>
        <SimpleColumn TType="Order" For="@(x => x.Customer.ContactName)" Sortable="@true" Heading="Contact" Searchable="true"/>
    </Columns>
</SimpleGrid>

@code {
    public DatabaseContext Context { get; set; } = DatabaseContextFactory.Create();
}